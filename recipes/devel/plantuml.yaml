metaEnvironment:
    PKG_VERSION: "1.2025.10"

depends:
    - devel::openjdk

checkoutSCM:
    scm: url
    url: ${GITHUB_MIRROR}/plantuml/plantuml/releases/download/v${PKG_VERSION}/plantuml-mit-${PKG_VERSION}.jar
    digestSHA256: "a0e2f8f176e812fe1118246e4ffbf2d9c2bf2a0977024b3d533459f5e2df838c"
    dir: plantuml
    extract: no

buildScript: |
    # create a symlink to avoid wasting memory
    $FileName = $(Get-ChildItem "$($args[0])/plantuml" -File '*.jar')
    New-Item -ItemType SymbolicLink -Force -Path "plantuml.jar"  -Target "$($args[0])/plantuml/$FileName" >$null

packageToolsWeak: [7z]
packageScript: |
    mkdir -p usr/bin > $null
    cp -r "$($args[0])\plantuml.jar" usr/bin

provideTools:
    plantuml:
        path: "usr/bin"
